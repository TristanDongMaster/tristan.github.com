---
layout: post
title: "移动端页面 hover 效果"
description: ""
category: html5
tags: [html5]
---

## 问题：css中的 ```:hover``` 效果在移动端表现怎么样

这是个常见问题，类似的还有， ```:hover``` 在移动端和pc端表现一致吗等。。。

为了更好提升移动端网页产品的用户体验，类似pc的 hover ，当用户 touch 某个地方的时候，需要让网页和用户有一些交互，让用户确实感知到自己的操作。

那么自然想到 ```:hover``` 属性，但是它在移动端表现怎么样呢？

这里写了个小demo


	<!DOCTYPE html>
	<html>
	<head>
		<meta charset="utf-8" >
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<meta name="msapplication-tap-highlight" content="no">	
		<meta content="yes" name="apple-mobile-web-app-capable">
		<meta content="black" name="apple-mobile-web-app-status-bar-style">
		<meta content="telephone=no" name="format-detection">

		<title>a target test</title>
		<style type="text/css">
			html,body{
				font-size: 62.5%;
			}
			.list{
				margin-top: 5rem;
				float: left;
				width: 100%;
			}
			.item{
				float: left;
				width: 100%;
				height: 4rem;
				border-bottom: 1px solid #999;
				background: #fafafa;
				color: #222;
				font-size: 1.6rem;
				line-height: 4rem;
				text-align: center;
			}

			.item:hover{
				background: #f1f1f1;
			}
		</style>
	</head>
	<body>
		<h1>移动端 hover 效果测试</h1>

		<div class="list">
			<div class="item">item item item 1</div>
			<div class="item">item item item 2</div>
			<div class="item">item item item 3</div>
			<div class="item">item item item 4</div>
		</div>
	</body>
	</html>


复制上面的代码，放在一个静态服务器上，用手机打开网页，你会发现在手机上，根本没有 hover 效果、或者有hover效果的，只不过在结束了 touch 之后，hover的背景颜色并不会消失，一直在那里。 上面这两种情况还取决于你使用哪种浏览器打开，前者是 Safari 后者是UC浏览器。


下面有段关于css hover 的官方说明


> The :hover pseudo-class applies while the user designates an element (with some pointing device), but does not activate it. For example, a visual user agent could apply this pseudo-class when the cursor (mouse pointer) hovers over a box generated by the element. User agents not supporting interactive media do not have to support this pseudo-class. Some conforming user agents supporting interactive media may not be able to support this pseudo-class (e. g., a pen device).
>
> — [W3C: CSS 2.1: Selectors, dynamic pseudo-classes](http://www.w3.org/TR/CSS2/selector.html#dynamic-pseudo-classes)


可见，hover是针对鼠标指针是可以起作用的，而移动设备可能不支持的。


那么，机智的我们想到了，在移动端虽然没有鼠标hover，但是我们有 touchstart 和 touchend 事件啊。 他们分别在用户点击开始和结束时触发，那么我们只要在两个时刻对点击对象做点什么就可以实现用户hover效果了。

思路有了那么我们开始吧

还是上面这段代码，为了操作方便，我们引入zeptojs，修改后代码如下：



	<!DOCTYPE html>
	<html>
	<head>
		<meta charset="utf-8" >
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
		<meta name="msapplication-tap-highlight" content="no">	
		<meta content="yes" name="apple-mobile-web-app-capable">
		<meta content="black" name="apple-mobile-web-app-status-bar-style">
		<meta content="telephone=no" name="format-detection">

		<title>a target test</title>
		<style type="text/css">
			html,body{
				font-size: 62.5%;
			}
			.list{
				margin-top: 5rem;
				float: left;
				width: 100%;
			}
			.item{
				float: left;
				width: 100%;
				height: 4rem;
				border-bottom: 1px solid #999;
				background: #fafafa;
				color: #222;
				font-size: 1.6rem;
				line-height: 4rem;
				text-align: center;
			}

			.touching{
				background: #f1f1f1;
			}
		</style>
	</head>
	<body>
		<h1>移动端 hover 效果测试</h1>

		<div class="list">
			<div class="item" data-hover>item item item 1</div>
			<div class="item" data-hover>item item item 2</div>
			<div class="item" data-hover>item item item 3</div>
			<div class="item" data-hover>item item item 4</div>
		</div>
	</body>
	</html>

	<script type="text/javascript" src="http://apps.bdimg.com/libs/zepto/1.1.4/zepto.min.js"></script>

	<script type="text/javascript">
		$(function(){
			$('body').on('touchstart','[data-hover]',function(e){
				$(e.target).addClass('touching')
			});

			$('body').on('touchend','[data-hover]',function(e){
				$(e.target).removeClass('touching')
			});

		})
	</script>

这时候，在手机上打开页面，item的hover效果出来了！










